EESchema Schematic File Version 4
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title "SKRIPSI POMPA AIR IOT"
Date "2020-07-26"
Rev "0.0.1"
Comp "ANUNG"
Comment1 "312118052"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L wemos_mini:WeMos_D1_mini U5
U 1 1 5F1D18F0
P 6150 3400
F 0 "U5" H 6150 4046 60  0000 C CNN
F 1 "NodeMCU" H 6150 3936 60  0000 C CNN
F 2 "" H 6700 2700 60  0000 C CNN
F 3 "" H 6150 3936 60  0000 C CNN
	1    6150 3400
	1    0    0    -1  
$EndComp
$Comp
L Transistor_FET:IRF3205 Q1
U 1 1 5F1D19A2
P 9700 3350
F 0 "Q1" H 9906 3397 50  0000 L CNN
F 1 "IRFZ44" H 9906 3304 50  0000 L CNN
F 2 "Package_TO_SOT_THT:TO-220-3_Vertical" H 9950 3275 50  0001 L CIN
F 3 "http://www.irf.com/product-info/datasheets/data/irf3205.pdf" H 9700 3350 50  0001 L CNN
	1    9700 3350
	1    0    0    -1  
$EndComp
$Comp
L Isolator:PC817 U6
U 1 1 5F1D1A43
P 8950 2850
F 0 "U6" H 8950 3181 50  0000 C CNN
F 1 "PC817" H 8950 3088 50  0000 C CNN
F 2 "Package_DIP:DIP-4_W7.62mm" H 8750 2650 50  0001 L CIN
F 3 "http://www.soselectronic.cz/a_info/resource/d/pc817.pdf" H 8950 2850 50  0001 L CNN
	1    8950 2850
	1    0    0    -1  
$EndComp
$Comp
L Device:R R7
U 1 1 5F1D1AB7
P 9400 3150
F 0 "R7" H 9470 3197 50  0000 L CNN
F 1 "220" H 9470 3104 50  0000 L CNN
F 2 "" V 9330 3150 50  0001 C CNN
F 3 "~" H 9400 3150 50  0001 C CNN
	1    9400 3150
	1    0    0    -1  
$EndComp
$Comp
L Device:R R8
U 1 1 5F1D1B09
P 9400 3650
F 0 "R8" H 9470 3697 50  0000 L CNN
F 1 "10k" H 9470 3604 50  0000 L CNN
F 2 "" V 9330 3650 50  0001 C CNN
F 3 "~" H 9400 3650 50  0001 C CNN
	1    9400 3650
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR019
U 1 1 5F1D1B5A
P 9800 3900
F 0 "#PWR019" H 9800 3650 50  0001 C CNN
F 1 "GND" H 9805 3723 50  0000 C CNN
F 2 "" H 9800 3900 50  0001 C CNN
F 3 "" H 9800 3900 50  0001 C CNN
	1    9800 3900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR017
U 1 1 5F1D1B7B
P 9400 3950
F 0 "#PWR017" H 9400 3700 50  0001 C CNN
F 1 "GND" H 9405 3773 50  0000 C CNN
F 2 "" H 9400 3950 50  0001 C CNN
F 3 "" H 9400 3950 50  0001 C CNN
	1    9400 3950
	1    0    0    -1  
$EndComp
$Comp
L Diode:1N4002 D2
U 1 1 5F1D1C34
P 9800 2850
F 0 "D2" V 9753 2929 50  0000 L CNN
F 1 "1N4002" V 9846 2929 50  0000 L CNN
F 2 "Diode_THT:D_DO-41_SOD81_P10.16mm_Horizontal" H 9800 2675 50  0001 C CNN
F 3 "http://www.vishay.com/docs/88503/1n4001.pdf" H 9800 2850 50  0001 C CNN
	1    9800 2850
	0    1    1    0   
$EndComp
$Comp
L Motor:Motor_DC M1
U 1 1 5F1D1CE1
P 10350 2750
F 0 "M1" H 10508 2747 50  0000 L CNN
F 1 "Motor_DC" H 10508 2654 50  0000 L CNN
F 2 "" H 10350 2660 50  0001 C CNN
F 3 "~" H 10350 2660 50  0001 C CNN
	1    10350 2750
	1    0    0    -1  
$EndComp
Wire Wire Line
	9400 3000 9400 2950
Wire Wire Line
	9400 2950 9250 2950
Wire Wire Line
	9400 3300 9400 3350
Wire Wire Line
	9500 3350 9400 3350
Connection ~ 9400 3350
Wire Wire Line
	9400 3350 9400 3500
Wire Wire Line
	9800 3000 9800 3050
Wire Wire Line
	10350 3050 9800 3050
Connection ~ 9800 3050
Wire Wire Line
	9800 3050 9800 3150
Wire Wire Line
	9800 2700 9800 2450
Wire Wire Line
	9800 2450 10350 2450
Wire Wire Line
	10350 2450 10350 2550
$Comp
L power:+12V #PWR018
U 1 1 5F1D1E7D
P 9800 2200
F 0 "#PWR018" H 9800 2050 50  0001 C CNN
F 1 "+12V" H 9815 2377 50  0000 C CNN
F 2 "" H 9800 2200 50  0001 C CNN
F 3 "" H 9800 2200 50  0001 C CNN
	1    9800 2200
	1    0    0    -1  
$EndComp
Wire Wire Line
	9800 2200 9800 2450
Connection ~ 9800 2450
Wire Wire Line
	9250 2750 9250 2450
Wire Wire Line
	9250 2450 9800 2450
$Comp
L power:+3.3V #PWR016
U 1 1 5F1D2043
P 8550 2600
F 0 "#PWR016" H 8550 2450 50  0001 C CNN
F 1 "+3.3V" H 8565 2777 50  0000 C CNN
F 2 "" H 8550 2600 50  0001 C CNN
F 3 "" H 8550 2600 50  0001 C CNN
	1    8550 2600
	1    0    0    -1  
$EndComp
Wire Wire Line
	8550 2600 8550 2750
Wire Wire Line
	8550 2750 8650 2750
$Comp
L Device:R R6
U 1 1 5F1D2181
P 8550 3200
F 0 "R6" H 8620 3247 50  0000 L CNN
F 1 "220" H 8620 3154 50  0000 L CNN
F 2 "" V 8480 3200 50  0001 C CNN
F 3 "~" H 8550 3200 50  0001 C CNN
	1    8550 3200
	1    0    0    -1  
$EndComp
Wire Wire Line
	8550 3050 8550 2950
Wire Wire Line
	8550 2950 8650 2950
Wire Wire Line
	9400 3800 9400 3950
Wire Wire Line
	9800 3900 9800 3550
$Comp
L Sensor_Current:A1363xKTTN-5 U1
U 1 1 5F1D2D52
P 2400 1700
F 0 "U1" H 2170 1747 50  0000 R CNN
F 1 "flow sensor" H 2170 1654 50  0000 R CNN
F 2 "Sensor_Current:Allegro_SIP-4" H 2750 1600 50  0001 L CIN
F 3 "http://www.allegromicro.com/~/media/Files/Datasheets/A1363-Datasheet.ashx?la=en" H 2400 1700 50  0001 C CNN
	1    2400 1700
	1    0    0    -1  
$EndComp
$Comp
L Sensor_Temperature:DS18B20 U2
U 1 1 5F1D2EC1
P 2400 3150
F 0 "U2" H 2170 3197 50  0000 R CNN
F 1 "DS18B20" H 2170 3104 50  0000 R CNN
F 2 "Package_TO_SOT_THT:TO-92_Inline" H 1400 2900 50  0001 C CNN
F 3 "http://datasheets.maximintegrated.com/en/ds/DS18B20.pdf" H 2250 3400 50  0001 C CNN
	1    2400 3150
	1    0    0    -1  
$EndComp
$Comp
L HC-SR04:HC-SR04 U3
U 1 1 5F1D3FA1
P 2550 4350
F 0 "U3" H 2643 4720 50  0000 C CNN
F 1 "HC-SR04" H 2643 4627 50  0000 C CNN
F 2 "XCVR_HC-SR04" H 2550 4350 50  0001 L BNN
F 3 "Osepp" H 2550 4350 50  0001 L BNN
	1    2550 4350
	-1   0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR02
U 1 1 5F1D41D8
P 2400 1250
F 0 "#PWR02" H 2400 1100 50  0001 C CNN
F 1 "+3.3V" H 2415 1427 50  0000 C CNN
F 2 "" H 2400 1250 50  0001 C CNN
F 3 "" H 2400 1250 50  0001 C CNN
	1    2400 1250
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR03
U 1 1 5F1D423B
P 2400 2150
F 0 "#PWR03" H 2400 1900 50  0001 C CNN
F 1 "GND" H 2405 1973 50  0000 C CNN
F 2 "" H 2400 2150 50  0001 C CNN
F 3 "" H 2400 2150 50  0001 C CNN
	1    2400 2150
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR05
U 1 1 5F1D42BB
P 2400 3550
F 0 "#PWR05" H 2400 3300 50  0001 C CNN
F 1 "GND" H 2405 3373 50  0000 C CNN
F 2 "" H 2400 3550 50  0001 C CNN
F 3 "" H 2400 3550 50  0001 C CNN
	1    2400 3550
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR04
U 1 1 5F1D4381
P 2400 2700
F 0 "#PWR04" H 2400 2550 50  0001 C CNN
F 1 "+3.3V" H 2415 2877 50  0000 C CNN
F 2 "" H 2400 2700 50  0001 C CNN
F 3 "" H 2400 2700 50  0001 C CNN
	1    2400 2700
	1    0    0    -1  
$EndComp
Wire Wire Line
	2400 2700 2400 2850
Wire Wire Line
	2400 2150 2400 2000
Wire Wire Line
	2400 1400 2400 1250
Wire Wire Line
	2400 3450 2400 3550
$Comp
L power:+3.3V #PWR07
U 1 1 5F1D4FA2
P 2900 2700
F 0 "#PWR07" H 2900 2550 50  0001 C CNN
F 1 "+3.3V" H 2915 2877 50  0000 C CNN
F 2 "" H 2900 2700 50  0001 C CNN
F 3 "" H 2900 2700 50  0001 C CNN
	1    2900 2700
	1    0    0    -1  
$EndComp
$Comp
L Device:R R2
U 1 1 5F1D4FDA
P 2900 2900
F 0 "R2" H 2970 2947 50  0000 L CNN
F 1 "4k7" H 2970 2854 50  0000 L CNN
F 2 "" V 2830 2900 50  0001 C CNN
F 3 "~" H 2900 2900 50  0001 C CNN
	1    2900 2900
	1    0    0    -1  
$EndComp
Wire Wire Line
	2900 2750 2900 2700
Wire Wire Line
	2700 3150 2900 3150
Wire Wire Line
	2900 3150 2900 3050
$Comp
L power:+5V #PWR08
U 1 1 5F1D5833
P 2900 3950
F 0 "#PWR08" H 2900 3800 50  0001 C CNN
F 1 "+5V" H 2915 4127 50  0000 C CNN
F 2 "" H 2900 3950 50  0001 C CNN
F 3 "" H 2900 3950 50  0001 C CNN
	1    2900 3950
	1    0    0    -1  
$EndComp
Wire Wire Line
	2750 4250 2900 4250
Wire Wire Line
	2900 4250 2900 3950
$Comp
L power:GND #PWR09
U 1 1 5F1D60F7
P 2900 4700
F 0 "#PWR09" H 2900 4450 50  0001 C CNN
F 1 "GND" H 2905 4523 50  0000 C CNN
F 2 "" H 2900 4700 50  0001 C CNN
F 3 "" H 2900 4700 50  0001 C CNN
	1    2900 4700
	1    0    0    -1  
$EndComp
Wire Wire Line
	2750 4550 2900 4550
Wire Wire Line
	2900 4550 2900 4700
$Comp
L Device:R R3
U 1 1 5F1D664C
P 3200 4600
F 0 "R3" H 3270 4647 50  0000 L CNN
F 1 "330" H 3270 4554 50  0000 L CNN
F 2 "" V 3130 4600 50  0001 C CNN
F 3 "~" H 3200 4600 50  0001 C CNN
	1    3200 4600
	1    0    0    -1  
$EndComp
$Comp
L Device:R R4
U 1 1 5F1D66D5
P 3200 5000
F 0 "R4" H 3270 5047 50  0000 L CNN
F 1 "680" H 3270 4954 50  0000 L CNN
F 2 "" V 3130 5000 50  0001 C CNN
F 3 "~" H 3200 5000 50  0001 C CNN
	1    3200 5000
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR010
U 1 1 5F1D6711
P 3200 5250
F 0 "#PWR010" H 3200 5000 50  0001 C CNN
F 1 "GND" H 3205 5073 50  0000 C CNN
F 2 "" H 3200 5250 50  0001 C CNN
F 3 "" H 3200 5250 50  0001 C CNN
	1    3200 5250
	1    0    0    -1  
$EndComp
Wire Wire Line
	2750 4450 3200 4450
Wire Wire Line
	3200 4750 3200 4800
Wire Wire Line
	3200 5150 3200 5250
Text GLabel 3450 4800 2    50   Input ~ 0
echoPin
Wire Wire Line
	3450 4800 3200 4800
Connection ~ 3200 4800
Wire Wire Line
	3200 4800 3200 4850
Text GLabel 3400 4350 2    50   Input ~ 0
trigPin
Wire Wire Line
	3400 4350 2750 4350
Text GLabel 3200 3150 2    50   Input ~ 0
ds18b20Pin
Wire Wire Line
	3200 3150 2900 3150
Connection ~ 2900 3150
Text GLabel 3550 1700 2    50   Input ~ 0
flowPin
Wire Wire Line
	2800 1700 3550 1700
Text GLabel 8300 3500 0    50   Input ~ 0
motorPin
Wire Wire Line
	8300 3500 8550 3500
Wire Wire Line
	8550 3500 8550 3350
$Comp
L Device:LED D1
U 1 1 5F1DBBC1
P 4650 3300
F 0 "D1" V 4689 3179 50  0000 R CNN
F 1 "LED" V 4596 3179 50  0000 R CNN
F 2 "" H 4650 3300 50  0001 C CNN
F 3 "~" H 4650 3300 50  0001 C CNN
	1    4650 3300
	0    -1   -1   0   
$EndComp
$Comp
L Device:R R5
U 1 1 5F1DBC2E
P 5250 3050
F 0 "R5" V 5040 3050 50  0000 C CNN
F 1 "220" V 5133 3050 50  0000 C CNN
F 2 "" V 5180 3050 50  0001 C CNN
F 3 "~" H 5250 3050 50  0001 C CNN
	1    5250 3050
	0    1    1    0   
$EndComp
Wire Wire Line
	4650 3150 4650 3050
Wire Wire Line
	4650 3050 5100 3050
Wire Wire Line
	5400 3050 5650 3050
$Comp
L power:GND #PWR011
U 1 1 5F1E0176
P 4650 3650
F 0 "#PWR011" H 4650 3400 50  0001 C CNN
F 1 "GND" H 4655 3473 50  0000 C CNN
F 2 "" H 4650 3650 50  0001 C CNN
F 3 "" H 4650 3650 50  0001 C CNN
	1    4650 3650
	1    0    0    -1  
$EndComp
Wire Wire Line
	4650 3650 4650 3450
Text GLabel 5500 3300 0    50   Input ~ 0
ds18b20Pin
Text GLabel 7100 3500 2    50   Input ~ 0
trigPin
Text GLabel 5350 3600 0    50   Input ~ 0
echoPin
Text GLabel 7100 3200 2    50   Input ~ 0
flowPin
$Comp
L Switch:SW_Push SW1
U 1 1 5F1E1C79
P 2400 6200
F 0 "SW1" H 2400 6491 50  0000 C CNN
F 1 "SW_Push" H 2400 6398 50  0000 C CNN
F 2 "" H 2400 6400 50  0001 C CNN
F 3 "" H 2400 6400 50  0001 C CNN
	1    2400 6200
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR01
U 1 1 5F1E1F42
P 2100 6350
F 0 "#PWR01" H 2100 6100 50  0001 C CNN
F 1 "GND" H 2105 6173 50  0000 C CNN
F 2 "" H 2100 6350 50  0001 C CNN
F 3 "" H 2100 6350 50  0001 C CNN
	1    2100 6350
	1    0    0    -1  
$EndComp
Text GLabel 2950 6200 2    50   Input ~ 0
overloadPin
Wire Wire Line
	2200 6200 2100 6200
Wire Wire Line
	2100 6200 2100 6350
Wire Wire Line
	2600 6200 2750 6200
$Comp
L Device:R R1
U 1 1 5F1E3684
P 2750 5900
F 0 "R1" H 2820 5947 50  0000 L CNN
F 1 "10k" H 2820 5854 50  0000 L CNN
F 2 "" V 2680 5900 50  0001 C CNN
F 3 "~" H 2750 5900 50  0001 C CNN
	1    2750 5900
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR06
U 1 1 5F1E3708
P 2750 5650
F 0 "#PWR06" H 2750 5500 50  0001 C CNN
F 1 "+3.3V" H 2765 5827 50  0000 C CNN
F 2 "" H 2750 5650 50  0001 C CNN
F 3 "" H 2750 5650 50  0001 C CNN
	1    2750 5650
	1    0    0    -1  
$EndComp
Wire Wire Line
	2750 5650 2750 5750
Wire Wire Line
	2750 6200 2750 6050
Connection ~ 2750 6200
Wire Wire Line
	2750 6200 2950 6200
Text GLabel 5500 3450 0    50   Input ~ 0
overloadPin
$Comp
L Regulator_Switching:TMR_1-0511 U4
U 1 1 5F1E7103
P 6050 1450
F 0 "U4" H 6050 1921 50  0000 C CNN
F 1 "stepDownConverterLm2596" H 6050 1828 50  0000 C CNN
F 2 "Converter_DCDC:Converter_DCDC_TRACO_TMR-1-xxxx_Single_THT" H 6050 1100 50  0001 C CNN
F 3 "http://assets.tracopower.com/TMR1/documents/tmr1-datasheet.pdf" H 6050 950 50  0001 C CNN
	1    6050 1450
	1    0    0    -1  
$EndComp
$Comp
L Connector:Jack-DC 12V_input
U 1 1 5F1E7570
P 4650 1350
F 0 "12V_input" H 4707 1681 50  0000 C CNN
F 1 "Jack-DC" H 4707 1588 50  0000 C CNN
F 2 "" H 4700 1310 50  0001 C CNN
F 3 "~" H 4700 1310 50  0001 C CNN
	1    4650 1350
	1    0    0    -1  
$EndComp
Wire Wire Line
	4950 1250 5400 1250
Wire Wire Line
	4950 1450 5400 1450
Wire Wire Line
	5400 1450 5400 1650
Wire Wire Line
	5400 1650 5550 1650
$Comp
L power:+5V #PWR013
U 1 1 5F1EABD9
P 6700 1100
F 0 "#PWR013" H 6700 950 50  0001 C CNN
F 1 "+5V" H 6715 1277 50  0000 C CNN
F 2 "" H 6700 1100 50  0001 C CNN
F 3 "" H 6700 1100 50  0001 C CNN
	1    6700 1100
	1    0    0    -1  
$EndComp
Wire Wire Line
	6550 1250 6700 1250
Wire Wire Line
	6700 1250 6700 1100
$Comp
L power:GND #PWR014
U 1 1 5F1EBBB5
P 6700 1800
F 0 "#PWR014" H 6700 1550 50  0001 C CNN
F 1 "GND" H 6705 1623 50  0000 C CNN
F 2 "" H 6700 1800 50  0001 C CNN
F 3 "" H 6700 1800 50  0001 C CNN
	1    6700 1800
	1    0    0    -1  
$EndComp
Wire Wire Line
	6550 1650 6700 1650
Wire Wire Line
	6700 1650 6700 1800
$Comp
L power:+12V #PWR012
U 1 1 5F1ECC4F
P 5400 1150
F 0 "#PWR012" H 5400 1000 50  0001 C CNN
F 1 "+12V" H 5415 1327 50  0000 C CNN
F 2 "" H 5400 1150 50  0001 C CNN
F 3 "" H 5400 1150 50  0001 C CNN
	1    5400 1150
	1    0    0    -1  
$EndComp
Wire Wire Line
	5400 1150 5400 1250
Connection ~ 5400 1250
Wire Wire Line
	5400 1250 5550 1250
$Comp
L Device:CP C1
U 1 1 5F1EEF9A
P 7000 1450
F 0 "C1" H 7121 1497 50  0000 L CNN
F 1 "100u/25v" H 7121 1404 50  0000 L CNN
F 2 "" H 7038 1300 50  0001 C CNN
F 3 "~" H 7000 1450 50  0001 C CNN
	1    7000 1450
	1    0    0    -1  
$EndComp
Wire Wire Line
	6700 1250 7000 1250
Wire Wire Line
	7000 1250 7000 1300
Connection ~ 6700 1250
$Comp
L power:GND #PWR015
U 1 1 5F1F029E
P 7000 1800
F 0 "#PWR015" H 7000 1550 50  0001 C CNN
F 1 "GND" H 7005 1623 50  0000 C CNN
F 2 "" H 7000 1800 50  0001 C CNN
F 3 "" H 7000 1800 50  0001 C CNN
	1    7000 1800
	1    0    0    -1  
$EndComp
Wire Wire Line
	7000 1800 7000 1600
Text GLabel 7100 3350 2    50   Input ~ 0
motorPin
$Comp
L power:+5V #PWR?
U 1 1 5F1F2DCE
P 6950 3750
F 0 "#PWR?" H 6950 3600 50  0001 C CNN
F 1 "+5V" V 6965 3881 50  0000 L CNN
F 2 "" H 6950 3750 50  0001 C CNN
F 3 "" H 6950 3750 50  0001 C CNN
	1    6950 3750
	0    1    1    0   
$EndComp
Wire Wire Line
	6950 3750 6650 3750
Wire Wire Line
	7100 3350 6650 3350
Wire Wire Line
	5500 3450 5650 3450
Wire Wire Line
	5350 3600 5500 3600
Wire Wire Line
	5500 3600 5500 3550
Wire Wire Line
	5500 3550 5650 3550
Wire Wire Line
	5650 3350 5600 3350
Wire Wire Line
	5600 3350 5600 3300
Wire Wire Line
	5600 3300 5500 3300
Wire Wire Line
	7100 3200 6950 3200
Wire Wire Line
	6950 3200 6950 3250
Wire Wire Line
	6650 3250 6950 3250
Wire Wire Line
	6950 3450 6950 3500
Wire Wire Line
	6950 3500 7100 3500
Wire Wire Line
	6650 3450 6950 3450
$Comp
L power:+3.3V #PWR?
U 1 1 5F21093A
P 5350 3850
F 0 "#PWR?" H 5350 3700 50  0001 C CNN
F 1 "+3.3V" V 5365 3981 50  0000 L CNN
F 2 "" H 5350 3850 50  0001 C CNN
F 3 "" H 5350 3850 50  0001 C CNN
	1    5350 3850
	0    -1   -1   0   
$EndComp
Wire Wire Line
	5350 3850 5500 3850
Wire Wire Line
	5500 3850 5500 3750
Wire Wire Line
	5500 3750 5650 3750
$Comp
L power:GND #PWR?
U 1 1 5F219CFD
P 6900 3650
F 0 "#PWR?" H 6900 3400 50  0001 C CNN
F 1 "GND" V 6905 3519 50  0000 R CNN
F 2 "" H 6900 3650 50  0001 C CNN
F 3 "" H 6900 3650 50  0001 C CNN
	1    6900 3650
	0    -1   -1   0   
$EndComp
Wire Wire Line
	6900 3650 6650 3650
$EndSCHEMATC
